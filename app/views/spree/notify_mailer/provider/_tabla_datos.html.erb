<% @total = 0 -%>
<table border="0" cellpadding="10" cellspacing="0" width="100%" class="templateDataTable">
  <col style="width: 10%; vertical-align: middle; text-align: center">
  <col style="width: 50%; vertical-align: middle; text-align: center">
  <col style="width: 10%; vertical-align: middle; text-align: center">
  <col style="width: 10%; vertical-align: middle; text-align: center">
  <col style="width: 10%; vertical-align: middle; text-align: center">
  <col style="width: 10%; vertical-align: middle; text-align: center">
  <tr>
    <th scope="col" class="dataTableHeading">CODIGO</th>
    <th scope="col" class="dataTableHeading">NOMBRE</th>
    <th scope="col" class="dataTableHeading">MEDIDAS</th>
    <th scope="col" class="dataTableHeading">CANTIDAD</th>
    <th scope="col" class="dataTableHeading">PRECIO</th>
    <th scope="col" class="dataTableHeading">TOTAL</th>
  </tr>
  <% @order.line_items.each do |item| %>
    <tr>
      <td class="dataTableContent">
        <%= item.variant.sku %>
      </td>
      <td class="dataTableContent">
        <%= raw(item.variant.product.name) %>
      </td>
      <td class="dataTableContent">
        <%= raw(item.variant.tire_width.name) unless item.variant.tire_width_id.nil? -%>/<%= raw(item.variant.tire_serial.name) unless item.variant.tire_serial_id.nil? -%>/<%= raw(item.variant.tire_innertube.name) unless item.variant.tire_innertube_id.nil? -%>/<%= raw(item.variant.tire_speed_code.name) unless item.variant.tire_speed_code_id.nil? -%>
      </td>
      <td class="dataTableContent" style="vertical-align:middle;text-align:center;">
        <%=item.quantity%>
      </td>
      <td class="dataTableContent">
        <%= Spree::Money.new(item.variant.cost_price, { :currency => @order.currency })  %>
      </td>
      <td class="dataTableContent">
        <%= Spree::Money.new((item.variant.cost_price * item.quantity), { :currency => @order.currency }) %>
      </td>
    </tr>
    <% @total += item.variant.cost_price * item.quantity %>
  <% end -%>
  <tr>
    <td colspan="5" style="text-align:right;" class="dataTableContent">
      <%= t('order_mailer.confirm_email.subtotal') %>
    </td>
    <td class="dataTableContent">
      <%= Spree::Money.new(@total, { :currency => @order.currency }) %>
    </td>
  </tr>
  <tr>
    <td colspan="5" style="text-align:right;" class="dataTableContent">
      Pedido Total
    </td>
    <td class="dataTableContent">
      <%= Spree::Money.new(@total, { :currency => @order.currency }) %>
    </td>
  </tr>
</table>
